# topology documentation: xxx 
#
# add ip to host1:
#   ip addr add 192.168.188.100/24 dev eth1
#
# add ip to host2:
#   ip addr add 192.168.189.100/24 dev eth1
#
# add snat to router1:
#   iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE 

name: kommprot-lab-simple

topology:
  kinds:
    linux:
      image: wbitt/network-multitool:alpine-extra
  nodes:
    host1:
      kind: linux
      group: hosts
      exec:
        - ip route del default
    router1:
      kind: linux
      exec:
        - ip addr add 192.168.188.1/24 dev eth1
        - ip addr add 192.168.189.1/24 dev eth2
    host2:
      kind: linux
      group: hosts
      exec:
        - ip route del default

  links:
    - endpoints: ["host1:eth1", "router1:eth1"]
    - endpoints: ["host2:eth1", "router1:eth2"]
